#!/bin/bash

# This script factorizes as many numbers as possible from a file into a product of two smaller numbers.
# Usage: ./factors <file>

# Function to factorize a number
factorize() {
    num=$1
    for i in $(seq 2 $((${num} / 2)); do
        if [ $((num % i)) -eq 0 ]; then
            echo "$num=$i*$((num / i))"
            return
        fi
    done
    echo "$num=$num*1"
}

# Main function
main() {
    if [ "$#" -ne 1 ]; then
        exit 1
    fi

    file="$1"
    if [ ! -f "$file" ]; then
        exit 1
    fi

    while read -r line; do
        num=$(echo "$line" | tr -d ' ')
        if [ "$num" -gt 1 ]; then
            factorize "$num"
        fi
    done < "$file"
}

if [ "$0" = "$BASH_SOURCE" ]; then
    main "$@"
fi
